<template>
 <div class="swiper-box">
    <view
      class="swiper-item-content"
      wx:class="{{ {'animate-up': animateUp} }}"
      wx:for="{{texts}}"
      :key="index"
    >
    {{item}}
    </view>
  </div>
</template>

<script>
  import { createComponent } from '@mpxjs/core'
  
  const interval = 5000
  const duration = 500
  createComponent({
    properties: {
      texts: {
        type: Array,
        value: []
      }
    },
    data: {
      animateUp: false,
      timer: null
    },
    attached () {
      if (this.autoplay) {
        this.timer = setInterval(this.scrollAnimate, interval)
      }
    },
    computed: {
      autoplay () {
        return (this.texts.length > 1)
      }
    },
    methods: {
      onClick () {
      },
      scrollAnimate () {
        this.animateUp = true
        setTimeout(() => {
          this.texts.push(this.texts[0])
          this.texts.shift()
          this.animateUp = false
        }, duration)
      }
    },
    beforeDestroy () {
      clearInterval(this.timer)
    }
  })
</script>

<style lang="stylus" scoped>
@import "../../common/stylus/mixin.styl"

.swiper-box
  width 100%
  height 20px
  overflow hidden
.swiper-item
  width 100%
  height 20px
.swiper-item-content
  color #ffd67d
  font-size 10px
  line-height 19px
  white-space: nowrap
.animate-up
  transition: all 0.5s ease-in-out
  transform: translateY(-19px)
</style>

<script type="application/json">
  {
    "component": true
  }
</script>
