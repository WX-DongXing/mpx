<template>
  <view class="with-unit-component" wx:class="{{ { 'highlight' : highlight } }}" wx:if="{{value}}">
    <text class="with-unit-value">{{value}}</text>
    <text class="with-unit-unit">{{unit}}</text>
  </view>
</template>

<script>
  import { createComponent } from '@mpxjs/core'

  createComponent({
    properties: {
      item: {
        type: Object,
        value: {}
      }
    },
    computed: {
      value () {
        // value 可能是 0
        const value = this.item.value
        if (value === undefined) return
        return `${value}`
      },
      unit () {
        return this.item.unit || '%'
      },
      highlight () {
        return !!this.item.highlight
      }
    }
  })
</script>

<style lang="stylus">
.with-unit-component
  white-space nowrap
  font-size 0
  .with-unit-value
    font-family dinum
    font-size 15px
    color #961510
    white-space nowrap
    line-height 12px
  .with-unit-unit
    font-size 9px
    color #961510
    white-space nowrap
    line-height 12px
  &.highlight
    .with-unit-value
      color #ffffff
      font-size 30px
      line-height 20px
    .with-unit-unit
      color #ffffff
      font-size 20px
      line-height 20px
</style>

<script type="application/json">
  {
    "component": true
  }
</script>
