<template>
  <view class="authorization-text-component" bindtap="onClick">
    <text class="authorization-text-checkbox" wx:class="{{ { 'selected': value } }}"></text>
    <text class="authorization-text-content">已阅读并同意《活动授权须知》</text>
  </view>
</template>

<script>
  import { createComponent } from '@mpxjs/core'
  import { trackEvent } from '../../../common/js/Omega'
  createComponent({
    properties: { // 通过 wx:model 注入
      value: { // 是否同意过授权
        type: Boolean,
        value: false
      },
      type: {
        type: String,
        value: 'page'
      }
    },
    methods: {
      onClick () {
        const value = !this.value
        this.triggerEvent('updated', value)
        let eventKey = 'wyc_mkt_ppyuyue_leader_authorization_ck'
        if (this.type === 'popup') {
          eventKey = 'wyc_mkt_ppyuyue_follower_pop_authorization_ck'
        } else {
          trackEvent('tech_wyc_mkt_ppyuyue_authorization_text_ck')
        }
        trackEvent(eventKey)
      }
    }
  })
</script>

<style lang="stylus">
  .authorization-text-component
    display flex
    align-items center
    justify-content center
  .authorization-text-checkbox
    display inline-block
    width 12px
    height 12px
    margin-right 6px
    background-image url('../../../assets/icon-unselect.png')
    background-size contain
    background-repeat no-repeat
    &.selected
      background-image url('../../../assets/icon-selected.png')
  .authorization-text-content
    font-size 12px
    line-height 18px
    color #FFCFA2
</style>

<script type="application/json">
  {
    "component": true
  }
</script>
