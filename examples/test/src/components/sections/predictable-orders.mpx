<!-- 小程序不会展示这个模块 -->
<template>
  <view class="predictable-orders-component" wx:if="{{chartData}}" v-exposure@web="exposure">
    <base-section title="{{title}}">
      <chart
        data="{{chartData}}"
        type="{{chartType}}"
        area="{{chartArea}}"
        average="{{chartAverage}}"
      ></chart>
      <rich-text class="predictable-orders-tip" wx:for="{{tips}}" wx:key="index"  nodes="{{item}}"></rich-text>
    </base-section>
  </view>
</template>

<script>
  import { createComponent } from '@mpxjs/core'
  import { strToHtml } from '../../common/js/utils'
  import { trackAggregateEvent } from '../../common/js/Omega'

  createComponent({
    properties: {
      info: {
        type: Object,
        value: {}
      }
    },
    computed: {
      title () {
        return this.info.head_title
      },
      chartData () {
        return this.info.data
      },
      chartType () {
        return this.info.type
      },
      chartArea () {
        return this.info.area
      },
      chartAverage () {
        return this.info.average
      },
      tips () {
        const descs = this.info.desc || []
        return descs.map(desc => strToHtml(desc))
      }
    },
    methods: {
      exposure () {
        trackAggregateEvent('wyc_sdmarketing_gxyc_sw')
      }
    }
  })
</script>

<style lang="stylus">
  .predictable-orders-component
    margin-top 29px
    padding-bottom 15px
    .predictable-orders-tip
      padding 0 10px
      text-align left
      font-size 13px
      color #b75e41
      line-height 18px
</style>

<script type="application/json">
  {
    "component": true,
    "usingComponents": {
      "chart": "../chart/index",
      "base-section": "./base"
    }
  }
</script>
