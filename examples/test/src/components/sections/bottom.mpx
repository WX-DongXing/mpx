<template>
  <view class="bottom-component" wx:if="{{list.length}}">
    <bottom-card wx:for="{{list}}" wx:key="index" item="{{item}}" bindclicked="onClick(item)" />
  </view>
</template>

<script>
  import { createComponent } from '@mpxjs/core'
  import { universelPageJump } from '../../common/js/pageJump'
  import { trackAggregateEvent } from '../../common/js/Omega'

  createComponent({
    properties: {
      list: {
        type: Array,
        value: []
      }
    },
    methods: {
      onClick (item = {}) {
        trackAggregateEvent('wyc_sdmarketing_sjj_ck', {
          title: item.title
        })
        const ret = universelPageJump(item.jump_url)
        // 走客服会话逻辑
        if (ret === true) {
          this.triggerEvent('customerService')
        }
      }
    }
  })
</script>

<style lang="stylus">
  .bottom-component
    margin-top 29px
</style>

<script type="application/json">
  {
    "component": true,
    "usingComponents": {
      "bottom-card": "../cards/bottom"
    }
  }
</script>
